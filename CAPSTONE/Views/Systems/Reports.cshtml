
@{
    ViewBag.Title = "Reports";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

@*<h2>Reports</h2>*@
<div class="row mt">
    <div class="col-lg-12">
        <div class="content-panel">
            <h4><i class="fa fa-angle-right"></i> Reports</h4>
            <section id="no-more-tables">
                <table class="table table-bordered table-striped table-condensed cf" id="tbl_apprehention">
                    <thead class="cf">
                        <tr>
                            <th>Name</th>
                            <th>Address</th>
                            <th>License No.</th>
                            <th>Vehicle Type</th>
                            <th>Place of Violation</th>
                            <th>Violation</th>
                            <th></th>
                        </tr>
                    </thead>
                    <tbody>
                        @*<tr>
                                <td data-title="Name">Jomiel Enriquez</td>
                                <td data-title="Address">Reaville Brgy. 7 Tanauan City</td>
                                <td data-title="License">N03-12-123456</td>
                                <td data-title="Vehicle">SUV</td>
                                <td data-title="Place">Crossing</td>
                                <td data-title="Violation">Handsomeness</td>
                            </tr>*@
                    </tbody>
                </table>
            </section>
            <div style="padding-right:0px; height:40px; padding-right:5px;">
                <button type="button" class="btn btn-round btn-success" style="float:right">Update</button>
                @*<button type="button" class="btn btn-round btn-info" style="float:right">Edit</button>*@
            </div>
        </div>
    </div>
</div>
<div style="text-align:center">

</div>

<script type="text/javascript">
    $('li a').removeClass("active");
    $('#tg-reports').addClass("active");

    $(document).ready(function () {
        console.log("ready");
        updateGrid();
    });
    function updateGrid() {
        $.ajax({
            type: "POST",
            url: "/Systems/getreport",
            dataType: "text",
            contentType: "application/json; charset=utf-8",
            success: function (data) {
                data = someerm(data);
                //gritter("Success", "see console log.");
                var Json_Data = JSON.parse(data);
                for (var i = 0; i < Json_Data.length; i++) {
                    var Row = `<tr id='` + Json_Data[i]["tid"] + `'><td data-title="Name">` + Json_Data[i]["fname"] + `</td>
                            <td data-title="Address">`+ Json_Data[i]["address"] + `</td>
                            <td data-title="License">`+ Json_Data[i]["licenseno"] + `</td>
                            <td data-title="Vehicle">`+ Json_Data[i]["vehicletype"] + `</td>
                            <td data-title="Place">`+ Json_Data[i]["placeofviolation"] + `</td>
                            <td data-title="Violation">`+ Json_Data[i]["vdesc"] + `</td>
                            <td data-title="Action"><button type="button" class="btn btn-round btn-info btn-sm">Edit</button></td></tr>`;
                    $('#tbl_apprehention tbody').append(Row);

                }
            },
            error: function (textStatus, errorThrown) {
                // Success = false;//doesn't go here
                gritter("Error", "Error processing the request.");
            }
        });
    }
</script>